Metadata-Version: 2.1
Name: piblin
Version: 0.0.0a1
Summary: Measurement data science functionality
Author: Matthew John Mills <mmills2@mmm.com>,
Douglas Elmore <dlelmore@mmm.com>,
Alex Bourque <abourque@mmm.com>,
Bryce Williams <not at 3M>,
Joel Patrow <not at 3M>,
Kyle Kalstabakken <not at 3M>,
Mahsa Lotfollahi <not at 3M>,
Alessandro Perego <aperego@mmm.com>,
Maryam Pardakhti <mpardakhti@mmm.com>,
Bjorn Melin <bmelin@mmm.com>,
Bryan Cote <bcote@mmm.com>,
License: Proprietary
Project-URL: Source, https://github.com/3mcloud/piblin
Classifier: Development Status :: 1 - Planning
Classifier: Intended Audience :: Science/Research
Classifier: Natural Language :: English
Classifier: Operating System :: OS Independent
Classifier: Topic :: Scientific/Engineering :: Chemistry
Classifier: Topic :: Scientific/Engineering :: Physics
Classifier: Topic :: Scientific/Engineering :: Information Analysis
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: License :: Other/Proprietary
Requires-Python: <3.12,>=3.7
License-File: LICENSE
Requires-Dist: matplotlib<=3.9.2
Requires-Dist: numpy>=1.21
Requires-Dist: scipy
Provides-Extra: tests
Requires-Dist: pytest; extra == "tests"
Requires-Dist: pytest-mpl; extra == "tests"
Requires-Dist: pytest-cov; extra == "tests"
Requires-Dist: pytest-html; extra == "tests"

[pypi-image]: https://badge.fury.io/py/piblin.svg
[pypi-url]: https://pypi.org/project/piblin/
[pypi-download]: https://static.pepy.tech/badge/piblin?period=total&units=international_system&left_color=grey&right_color=brightgreen&left_text=downloads
[docs-image]: https://img.shields.io/badge/docs-latest-blue

# piblin

[![PyPI Version][pypi-image]][pypi-url] [![pypi download][pypi-download]][pypi-url] 
[![DOI](https://zenodo.org/badge/840056615.svg)](https://doi.org/10.5281/zenodo.13946932)

Publication of this work is forthcoming. For now, if you use this software, please cite it using the metadata above DOI.

## Documentation

Documentation to learn more about the package and how to use its API is availble at: 

## Installation

`piblin` is in the PyPI! You can easily install it using `pip`:

```
pip install piblin
```

and likewise update it:

```
pip install piblin --upgrade
```

## Backround

The `piblin` package is based on a number of abstractions related to the collection
and analysis of scientific data. Its fundamental concept is the `piblin`, a mapping
between independent and dependent variables as typically obtained as the result of
applying a scientific measurement technique to a physical sample. The dimensionality
of these datasets provides a simple approach to classifying them.

Beyond differences in dimensionality, specific types of dataset are defined which allow
for customization of the behaviour of `piblin` for data collected by specific techniques.

Building on the dataset concept, scientific measurements are often discussed in terms
of a hierarchy of measurements, experiments and projects and this provides a natural
language for collecting, editing and analyzing scientific data. The `piblin` package
organizes datasets via the concept of a `Measurement`, which joins a set of conditions
and details with corresponding datasets. Sets of measurements can be organized into sets 
of `Experiment` objects, which collect multiple measurements with the same conditions 
into sets of repetitions, allowing for statistical analysis of variation among them. 
All of this organization is automatic, and can be controlled by direct and simple editing
of the metadata of measurements. Hierarchically organized data can also be flattened for 
use in machine learning applications and flat data can be converted into hierarchical data
in turn.

The final fundamental concept for performing data analytics on experimental datasets is
the `Transform`. This is a procedure which takes data as input and produces altered data
as output. For example a spectroscopic dataset may be integrated over a region to yield
the area under a peak, a transformation from a 1D dataset to a scalar value. The set of
transforms is infinite and `piblin` provides some general and some specific classes
that provide typical functionality. As for file reading, the package makes it as easy as
possible to add a new transform and a tutorial is included.

Data collected in CRAL is typically stored in files corresponding to a combination of
experimental datasets and their metadata. To ease the application of `piblin` functionality
to arbitrary datasets, extensive tools for reading data into sets of experiments are provided
and their extension to new file formats has been made as straightforward as possible.
Support for formats can be added by implementation of a single class and a tutorial is
included with the package.

Significantly more detail on the design, implementation and use of `piblin` can be found in
the package documentation.


## Style and Supporting Tools

This repository follows the naming conventions in
[PEP-8](https://www.python.org/dev/peps/pep-0008/#package-and-module-names), 
docstring conventions in
[PEP-257](https://www.python.org/dev/peps/pep-0257/)
and versioning conventions in
[PEP-440](https://www.python.org/dev/peps/pep-0440/#public-version-identifiers).
The [pytest](https://docs.pytest.org/en/latest/) library is used for testing,
using the 
[pytest-html](https://pypi.org/project/pytest-html/1.6/)
and 
[pytest-cov](https://pypi.org/project/pytest-cov/) 
plugins.
Documentation is produced with
[Sphinx](http://www.sphinx-doc.org/en/master/)
and all docstrings are written in the 
[numpy format](https://numpydoc.readthedocs.io/en/latest/format.html).
Distributions are produced with 
[setuptools](https://setuptools.readthedocs.io/en/latest/) and 
[conda-build](https://docs.conda.io/projects/conda-build/en/latest/).
The use of the
[conventional commits](https://www.conventionalcommits.org/en/v1.0.0/)
format for commit messages is suggested but not enforced.



## Developer Setup

A dev environment is planned but not yet provided. The following notes are 
intended to assist in setting up a local dev environment for working on 
`piblin`.

The library is currently tested against Python 3.7, 3.8, 3.9 and 3.10.
The following testing-related packages must be installed alongside the other requirements:
A set of development requirements are defined in `setup.py` which include
test and linting packages. Running this command in the top-level directory of
the source code within your python development environment will install all 
required development packages alongside `piblin` and its installation dependencies.

`pip install -e .[develop]`

### Branches

The piblin package uses the [GitFlow model](https://nvie.com/posts/a-successful-git-branching-model/) 
for branching, which works as follows.

When adding new functionality to the package, new development is to be carried out in 
feature branches and will only be merged to the main code when ready for release.
Feature branches are to be branched from the develop branch and merged back there only.
You can create sub-feature branches from feature branches as long as they only
merge into their root feature branch.

The develop branch is the single staging area for all completed features that
have not yet been released. The develop branch receives changes from hotfix
branches and bugfixes from release branches.

A hotfix branch is branched from a tagged release (i.e. master) *only* and is for making an emergency
change while being sure that the code to merge will only contain the fix. This isolates
hotfixes from new development. A complete hotfix should be merged to master *and* the
develop branch. Hotfixes can be used to fix CI/CD-detected problems or to correct bugs when 
the corrected code is urgently needed.

For release, a release branch is created from the develop branch (updating the major/minor version number). 
The release then needs to be tested and any problems should be fixed directly in 
that branch, and should be merged back into develop as well. Repeat the testing
and bug fixing until it is ok to release. A complete release branch must be merged
into master and develop at the same time, taking care not to lose any release changes 
due to changes in the develop branch.

The master only receives merges from release (update major/minor version number) and 
hotfix branches (update 3rd version number). Any merge to master *must* update 
the version number. These are then to be dealt with by CI/CD tools.

##### PyCharm
All required tools are integrated with PyCharm.

File-Settings-Tools-PythonIntegratedTools

The pytest package must be set as the default test runner.
Default test runner -> py.test

## CI/CD Setup

The package is built, tested and deployed using Azure DevOps; 
the relevant settings can be found in `azure-pipelines.yml`. 
Several jobs are defined that the CI/CD system can execute:

* RunTests will update `pip` and install `piblin` and `pytest` for python 3.7, 3.8, 3.9 and 3.10, 
then run all tests in the `./tests` directory using pytest. The test results
are written to an XML file.

* BuildAndDeploy runs only if RunTests was successful. The `pip` package is updated,
followed by `build`, then a wheel of the package is built using 
the `pyproject.toml` and `setup.cfg` files. The wheel is copied to an Azure storage account
used by the CRAL gALAxy web application, and that app is restarted so that the site reflects 
the presence of the new `cralds` wheel.

These jobs are triggered in various ways.

A CI trigger is included for the `master` and `develop` branch which causes the pipeline to run
whenever an update is pushed to that branch, running the tests and building either a release or 
development version of the package.

PR triggers are included for the `master` and `develop` branches. Whenever a pull 
request is opened with one of the specified target branches (or when such a PR is 
updated) the pipeline will run, testing but not building or deploying the package.

Azure DevOps documentation is [here](https://docs.microsoft.com/en-us/azure/devops/pipelines/).
